{"ast":null,"code":"var __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\nvar __rest = this && this.__rest || function (s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0) t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\") for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n    if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i])) t[p[i]] = s[p[i]];\n  }\n  return t;\n};\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { attachProps, dashToPascalCase, defineCustomElement, setRef } from './utils';\nexport const createOverlayComponent = (tagName, controller, customElement) => {\n  defineCustomElement(tagName, customElement);\n  const displayName = dashToPascalCase(tagName);\n  const didDismissEventName = \"on\".concat(displayName, \"DidDismiss\");\n  const didPresentEventName = \"on\".concat(displayName, \"DidPresent\");\n  const willDismissEventName = \"on\".concat(displayName, \"WillDismiss\");\n  const willPresentEventName = \"on\".concat(displayName, \"WillPresent\");\n  let isDismissing = false;\n  class Overlay extends React.Component {\n    constructor(props) {\n      super(props);\n      if (typeof document !== 'undefined') {\n        this.el = document.createElement('div');\n      }\n      this.handleDismiss = this.handleDismiss.bind(this);\n    }\n    static get displayName() {\n      return displayName;\n    }\n    componentDidMount() {\n      if (this.props.isOpen) {\n        this.present();\n      }\n    }\n    componentWillUnmount() {\n      if (this.overlay) {\n        this.overlay.dismiss();\n      }\n    }\n    handleDismiss(event) {\n      if (this.props.onDidDismiss) {\n        this.props.onDidDismiss(event);\n      }\n      setRef(this.props.forwardedRef, null);\n    }\n    shouldComponentUpdate(nextProps) {\n      if (this.overlay && nextProps.isOpen !== this.props.isOpen && nextProps.isOpen === false) {\n        isDismissing = true;\n      }\n      return true;\n    }\n    componentDidUpdate(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        if (this.overlay) {\n          attachProps(this.overlay, this.props, prevProps);\n        }\n        if (prevProps.isOpen !== this.props.isOpen && this.props.isOpen === true) {\n          this.present(prevProps);\n        }\n        if (this.overlay && prevProps.isOpen !== this.props.isOpen && this.props.isOpen === false) {\n          yield this.overlay.dismiss();\n          isDismissing = false;\n          this.forceUpdate();\n        }\n      });\n    }\n    present(prevProps) {\n      return __awaiter(this, void 0, void 0, function* () {\n        const _a = this.props,\n          {\n            children,\n            isOpen,\n            onDidDismiss,\n            onDidPresent,\n            onWillDismiss,\n            onWillPresent\n          } = _a,\n          cProps = __rest(_a, [\"children\", \"isOpen\", \"onDidDismiss\", \"onDidPresent\", \"onWillDismiss\", \"onWillPresent\"]);\n        const elementProps = Object.assign(Object.assign({}, cProps), {\n          ref: this.props.forwardedRef,\n          [didDismissEventName]: this.handleDismiss,\n          [didPresentEventName]: e => this.props.onDidPresent && this.props.onDidPresent(e),\n          [willDismissEventName]: e => this.props.onWillDismiss && this.props.onWillDismiss(e),\n          [willPresentEventName]: e => this.props.onWillPresent && this.props.onWillPresent(e)\n        });\n        this.overlay = yield controller.create(Object.assign(Object.assign({}, elementProps), {\n          component: this.el,\n          componentProps: {}\n        }));\n        setRef(this.props.forwardedRef, this.overlay);\n        attachProps(this.overlay, elementProps, prevProps);\n        yield this.overlay.present();\n      });\n    }\n    render() {\n      return ReactDOM.createPortal(this.props.isOpen || isDismissing ? this.props.children : null, this.el);\n    }\n  }\n  return React.forwardRef((props, ref) => {\n    return React.createElement(Overlay, Object.assign({}, props, {\n      forwardedRef: ref\n    }));\n  });\n};","map":{"version":3,"names":["React","ReactDOM","attachProps","dashToPascalCase","defineCustomElement","setRef","createOverlayComponent","tagName","controller","customElement","displayName","didDismissEventName","concat","didPresentEventName","willDismissEventName","willPresentEventName","isDismissing","Overlay","Component","constructor","props","document","el","createElement","handleDismiss","bind","componentDidMount","isOpen","present","componentWillUnmount","overlay","dismiss","event","onDidDismiss","forwardedRef","shouldComponentUpdate","nextProps","componentDidUpdate","prevProps","forceUpdate","_a","children","onDidPresent","onWillDismiss","onWillPresent","cProps","__rest","elementProps","Object","assign","ref","e","create","component","componentProps","render","createPortal","forwardRef"],"sources":["../../../../lib/components/stencil-generated/react-component-lib/createOverlayComponent.tsx"],"sourcesContent":[null],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}