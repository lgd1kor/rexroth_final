{"ast":null,"code":"import React,{useState,useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";const Preview3DApi=_ref=>{let{miDent,onDataFetch}=_ref;const[error,setError]=useState(null);const previousMiDent=useRef(null);const controller=useRef(null);useEffect(()=>{const fetchData=async()=>{if(previousMiDent.current===miDent)return;if(controller.current){controller.current.abort();}controller.current=new AbortController();const{signal}=controller.current;try{const params={mident:miDent,apikey:'e66120f9d9624823884cac1bf290ea88',language:'english',format:'PARTJAVA3D',preferformat:'PARTJAVA3D'};const queryString=new URLSearchParams(params).toString();const url=\"https://webapi.partcommunity.com/service/preview3d?\".concat(queryString);const response=await fetch(url,{signal});console.log('Response status:',response.status);if(!response.ok){throw new Error(\"Failed to fetch data: \".concat(response.statusText));}const responseBody=await response.text();// console.log('Response body:', responseBody);\nonDataFetch(responseBody);// Pass the fetched data to the parent\npreviousMiDent.current=miDent;}catch(error){if(error.name==='AbortError'){console.log('Fetch aborted');}else{console.error('Error fetching the data',error);setError('Error fetching the data. Please try again later.');}}};if(miDent){fetchData();}return()=>{if(controller.current){controller.current.abort();}};},[miDent,onDataFetch]);if(error){return/*#__PURE__*/_jsx(\"div\",{children:error});}return'';};export default Preview3DApi;","map":{"version":3,"names":["React","useState","useEffect","useRef","jsx","_jsx","Preview3DApi","_ref","miDent","onDataFetch","error","setError","previousMiDent","controller","fetchData","current","abort","AbortController","signal","params","mident","apikey","language","format","preferformat","queryString","URLSearchParams","toString","url","concat","response","fetch","console","log","status","ok","Error","statusText","responseBody","text","name","children"],"sources":["C:/Users/LGD1KOR/Desktop/rexroth_products_with_versions/rexroth_final/src/Preview3D/Preview3DApi.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\n\r\nconst Preview3DApi = ({ miDent, onDataFetch }) => {\r\n    const [error, setError] = useState(null);\r\n    const previousMiDent = useRef(null);\r\n    const controller = useRef(null);\r\n\r\n    useEffect(() => {\r\n        const fetchData = async () => {\r\n            if (previousMiDent.current === miDent) return;\r\n\r\n            if (controller.current) {\r\n                controller.current.abort();\r\n            }\r\n\r\n            controller.current = new AbortController();\r\n            const { signal } = controller.current;\r\n\r\n            try {\r\n                const params = {\r\n                    mident: miDent,\r\n                    apikey: 'e66120f9d9624823884cac1bf290ea88',\r\n                    language: 'english',\r\n                    format: 'PARTJAVA3D',\r\n                    preferformat: 'PARTJAVA3D',\r\n                };\r\n                const queryString = new URLSearchParams(params).toString();\r\n                const url = `https://webapi.partcommunity.com/service/preview3d?${queryString}`;\r\n                const response = await fetch(url, { signal });\r\n\r\n                console.log('Response status:', response.status);\r\n\r\n                if (!response.ok) {\r\n                    throw new Error(`Failed to fetch data: ${response.statusText}`);\r\n                }\r\n\r\n                const responseBody = await response.text();\r\n                // console.log('Response body:', responseBody);\r\n\r\n                onDataFetch(responseBody);  // Pass the fetched data to the parent\r\n                previousMiDent.current = miDent;\r\n            } catch (error) {\r\n                if (error.name === 'AbortError') {\r\n                    console.log('Fetch aborted');\r\n                } else {\r\n                    console.error('Error fetching the data', error);\r\n                    setError('Error fetching the data. Please try again later.');\r\n                }\r\n            }\r\n        };\r\n\r\n        if (miDent) {\r\n            fetchData();\r\n        }\r\n\r\n        return () => {\r\n            if (controller.current) {\r\n                controller.current.abort();\r\n            }\r\n        };\r\n    }, [miDent, onDataFetch]);\r\n\r\n    if (error) {\r\n        return <div>{error}</div>;\r\n    }\r\n\r\n    return '';\r\n};\r\n\r\nexport default Preview3DApi;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE3D,KAAM,CAAAC,YAAY,CAAGC,IAAA,EAA6B,IAA5B,CAAEC,MAAM,CAAEC,WAAY,CAAC,CAAAF,IAAA,CACzC,KAAM,CAACG,KAAK,CAAEC,QAAQ,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACxC,KAAM,CAAAW,cAAc,CAAGT,MAAM,CAAC,IAAI,CAAC,CACnC,KAAM,CAAAU,UAAU,CAAGV,MAAM,CAAC,IAAI,CAAC,CAE/BD,SAAS,CAAC,IAAM,CACZ,KAAM,CAAAY,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC1B,GAAIF,cAAc,CAACG,OAAO,GAAKP,MAAM,CAAE,OAEvC,GAAIK,UAAU,CAACE,OAAO,CAAE,CACpBF,UAAU,CAACE,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CAEAH,UAAU,CAACE,OAAO,CAAG,GAAI,CAAAE,eAAe,CAAC,CAAC,CAC1C,KAAM,CAAEC,MAAO,CAAC,CAAGL,UAAU,CAACE,OAAO,CAErC,GAAI,CACA,KAAM,CAAAI,MAAM,CAAG,CACXC,MAAM,CAAEZ,MAAM,CACda,MAAM,CAAE,kCAAkC,CAC1CC,QAAQ,CAAE,SAAS,CACnBC,MAAM,CAAE,YAAY,CACpBC,YAAY,CAAE,YAClB,CAAC,CACD,KAAM,CAAAC,WAAW,CAAG,GAAI,CAAAC,eAAe,CAACP,MAAM,CAAC,CAACQ,QAAQ,CAAC,CAAC,CAC1D,KAAM,CAAAC,GAAG,uDAAAC,MAAA,CAAyDJ,WAAW,CAAE,CAC/E,KAAM,CAAAK,QAAQ,CAAG,KAAM,CAAAC,KAAK,CAACH,GAAG,CAAE,CAAEV,MAAO,CAAC,CAAC,CAE7Cc,OAAO,CAACC,GAAG,CAAC,kBAAkB,CAAEH,QAAQ,CAACI,MAAM,CAAC,CAEhD,GAAI,CAACJ,QAAQ,CAACK,EAAE,CAAE,CACd,KAAM,IAAI,CAAAC,KAAK,0BAAAP,MAAA,CAA0BC,QAAQ,CAACO,UAAU,CAAE,CAAC,CACnE,CAEA,KAAM,CAAAC,YAAY,CAAG,KAAM,CAAAR,QAAQ,CAACS,IAAI,CAAC,CAAC,CAC1C;AAEA9B,WAAW,CAAC6B,YAAY,CAAC,CAAG;AAC5B1B,cAAc,CAACG,OAAO,CAAGP,MAAM,CACnC,CAAE,MAAOE,KAAK,CAAE,CACZ,GAAIA,KAAK,CAAC8B,IAAI,GAAK,YAAY,CAAE,CAC7BR,OAAO,CAACC,GAAG,CAAC,eAAe,CAAC,CAChC,CAAC,IAAM,CACHD,OAAO,CAACtB,KAAK,CAAC,yBAAyB,CAAEA,KAAK,CAAC,CAC/CC,QAAQ,CAAC,kDAAkD,CAAC,CAChE,CACJ,CACJ,CAAC,CAED,GAAIH,MAAM,CAAE,CACRM,SAAS,CAAC,CAAC,CACf,CAEA,MAAO,IAAM,CACT,GAAID,UAAU,CAACE,OAAO,CAAE,CACpBF,UAAU,CAACE,OAAO,CAACC,KAAK,CAAC,CAAC,CAC9B,CACJ,CAAC,CACL,CAAC,CAAE,CAACR,MAAM,CAAEC,WAAW,CAAC,CAAC,CAEzB,GAAIC,KAAK,CAAE,CACP,mBAAOL,IAAA,QAAAoC,QAAA,CAAM/B,KAAK,CAAM,CAAC,CAC7B,CAEA,MAAO,EAAE,CACb,CAAC,CAED,cAAe,CAAAJ,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}