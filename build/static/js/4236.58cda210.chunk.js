"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[4236],{6151:(e,t,s)=>{s.d(t,{A:()=>i});class i{constructor(e,t,s){this.resultsContainer=null,this.resizeObserver=null,this.handleInput=()=>{const e=this.input.value.trim();e?this.getSuggestions(e):this.clearResults()},this.handleKeydown=e=>{if(!this.resultsContainer)return;const t=this.resultsContainer.querySelectorAll("li");let s=Array.from(t).findIndex((e=>e.classList.contains("active")));switch(e.key){case"ArrowDown":case"ArrowUp":s=this.handleArrowKeys(e.key,s,t.length),this.setActiveItem(t,s),e.preventDefault();break;case"Enter":-1!==s&&this.handleEnterKey(s,t);break;case"Escape":this.clearResults()}},this.handleArrowKeys=(e,t,s)=>"ArrowDown"===e?(t+1)%s:(t-1+s)%s,this.handleEnterKey=(e,t)=>{if(-1!==e){const s=t[e];this.handleItemSelection({name:s.textContent||"",type:s.getAttribute("data-type")||""})}},this.handleBlur=()=>{setTimeout((()=>this.clearResults()),200)},this.handleFocus=()=>{const e=this.input.value.trim();if(this.config.fetchOnFocus){const t=e||this.config.defaultQuery||"";this.getSuggestions(t)}else e&&this.getSuggestions(e)},this.handleClickOutside=e=>{var t;(null===(t=this.hostElement.shadowRoot)||void 0===t?void 0:t.contains(e.target))||this.clearResults()},this.handleResize=()=>{if(this.resultsContainer){const e=this.getContainerParent();this.setResultsContainerStyles(this.resultsContainer,e)}},this.getSuggestions=async e=>{if(!this.config.fetchOnFocus&&e.length<this.config.minChars)return this.clearResults(),{query:e,results:[]};try{let t;if(this.config.onFetch)t=await this.config.onFetch(e);else{if(!this.config.url)throw new Error("No fetch function or URL provided in the configuration");{const s=this.config.url.replace(this.config.searchTermPlaceholder,encodeURIComponent(e)+(this.config.additionalParameters||"")),i=await fetch(s);if(!i.ok)throw new Error(`HTTP error! status: ${i.status}`);t=await i.json()}}return t.results.length>0?this.displayResults(t):this.clearResults(),t}catch(t){return console.error("Error fetching autocomplete suggestions:",t),this.clearResults(),{query:e,results:[]}}},this.config=e,this.hostElement=t,this.input=s}init(){this.addEventListeners(),this.setupResizeObserver()}addEventListeners(){this.input.addEventListener("input",this.handleInput),this.input.addEventListener("keydown",this.handleKeydown),this.input.addEventListener("blur",this.handleBlur),this.input.addEventListener("focus",this.handleFocus),document.addEventListener("click",this.handleClickOutside),window.addEventListener("resize",this.handleResize)}setupResizeObserver(){this.resizeObserver=new ResizeObserver(this.handleResize);const e=this.getContainerParent();this.resizeObserver.observe(e)}displayResults(e){const t=this.getContainerParent();if(this.clearResults(),0===e.results.length)return;this.resultsContainer=this.createResultsContainer(t);const s=this.config.maxResults?e.results.slice(0,this.config.maxResults):e.results;this.populateResultsContainer(s),this.updateInputAttributes()}getContainerParent(){var e;const t=null===(e=this.hostElement.shadowRoot)||void 0===e?void 0:e.querySelector(this.config.selector);if(!t)throw new Error(`Container parent element not found: ${this.config.selector}`);return t}createResultsContainer(e){const t=document.createElement("ul");return t.className=this.config.resultListClass,t.setAttribute("role","listbox"),t.id="autocomplete-results",t.setAttribute("tabindex","-1"),this.setResultsContainerStyles(t,e),e.insertAdjacentElement("afterend",t),t}setResultsContainerStyles(e,t){const s=t.getBoundingClientRect().width;e.style.boxSizing="border-box",e.style.maxWidth=`${s}px`,e.style.width="100%"}populateResultsContainer(e){const t=this.input.value.trim(),s=new RegExp(`(${this.escapeRegExp(t)})`,"gi");e.forEach(((e,t)=>{var i;const n=document.createElement("li");this.config.highlightResults?n.innerHTML=e.name.replace(s,"<mark>$1</mark>"):n.textContent=e.name,n.setAttribute("role","option"),n.setAttribute("data-type",e.type),n.id=`autocomplete-item-${t}`,n.addEventListener("click",(()=>this.handleItemSelection(e))),null===(i=this.resultsContainer)||void 0===i||i.appendChild(n)}))}escapeRegExp(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}updateInputAttributes(){this.input.setAttribute("aria-autocomplete","list"),this.input.setAttribute("aria-controls","autocomplete-results")}handleItemSelection(e){this.config.onSelect&&this.config.onSelect(e),this.input.value=e.name,this.config.closeOnSelect&&this.clearResults()}setActiveItem(e,t){e.forEach(((e,s)=>{e.classList.toggle("active",s===t),s===t&&e.scrollIntoView({block:"nearest",inline:"nearest"})}))}clearResults(){var e;null===(e=this.resultsContainer)||void 0===e||e.remove(),this.resultsContainer=null}destroy(){var e;window.removeEventListener("resize",this.handleResize),null===(e=this.resizeObserver)||void 0===e||e.disconnect(),this.clearResults()}}},4236:(e,t,s)=>{s.r(t),s.d(t,{dc_ui_dropdown_input:()=>r});var i=s(937),n=s(6151),a=(s(3572),s(2621));const o=(e,t)=>e instanceof Node&&e.nodeName.toLowerCase()===t,r=class{constructor(e){(0,i.r)(this,e),this.dcChange=(0,i.c)(this,"dcChange",7),e.$hostElement$["s-ei"]?this.internals=e.$hostElement$["s-ei"]:(this.internals=e.$hostElement$.attachInternals(),e.$hostElement$["s-ei"]=this.internals),this.isValidApiUrl=!1,this.validateApiUrl=()=>{if(!this.apiUrl)throw new Error("apiUrl is required");try{new URL(this.apiUrl)}catch(e){throw new Error("apiUrl is not a valid url")}return!0},this.handleClear=()=>{if(this.disabled)return;const{inputElement:e,internals:t}=this;e.value="",this.value=e.value,t.setFormValue(void 0)},this.handleInput=e=>{this.disabled||o(e.target,"input")&&(this.value=e.target.value,this.internals.setFormValue(`${this.value}`))},this.handleChange=e=>{this.disabled||o(e.target,"input")&&(this.value=e.target.value,this.internals.setFormValue(`${this.value}`),this.dcChange.emit({value:this.value,el:this.hostElement}))},this.returnCSSClasses=()=>({"dropdown-input-container":!0,"dropdown-input-container--disabled":this.disabled,"dropdown-input-container--readonly":this.readonly,"dropdown-input-container--required":this.required,"dropdown-input-container--hide-label":this.hideLabel,[`dropdown-input-container--validation-state-${this.validationstate}`]:"none"!==this.validationstate}),this.suggestions=[],this.showSuggestions=!1,this.placeholder="",this.apiUrl=void 0,this.searchTermPlaceholder="{query}",this.additionalParameters=void 0,this.defaultQuery=void 0,this.label="",this.hideLabel=!1,this.validationstate="none",this.disabled=!1,this.readonly=!1,this.required=!1,this.message="",this.maxResults=void 0,this.highlightResults=!0,this.name=void 0,this.value=void 0}handleValueChange(){Array.isArray(this.value)?this.internals.setFormValue(this.value.join(",")):this.internals.setFormValue(`${this.value}`)}handleDisabledChange(){var e;this.disabled?null===(e=this.autocomplete)||void 0===e||e.destroy():this.initAutocomplete()}handleReadonlyChange(){var e;this.readonly?null===(e=this.autocomplete)||void 0===e||e.destroy():this.initAutocomplete()}componentWillLoad(){var e;this.isValidApiUrl=this.validateApiUrl(),this.additionalParameters=null===(e=this.additionalParameters)||void 0===e?void 0:e.trim(),this.handleValueChange()}formResetCallback(){this.value&&this.handleClear()}componentDidLoad(){this.isValidApiUrl&&this.initAutocomplete()}initAutocomplete(){this.disabled||this.readonly||(this.autocompleteOptions=Object.assign(Object.assign(Object.assign(Object.assign({url:this.apiUrl,searchTermPlaceholder:this.searchTermPlaceholder,minChars:1,selector:"#dropdown-input",resultListClass:"suggestions-list",closeOnSelect:!0},this.maxResults&&{maxResults:this.maxResults}),{fetchOnFocus:!0,defaultQuery:this.defaultQuery,highlightResults:this.highlightResults}),this.additionalParameters&&{additionalParameters:`&${this.additionalParameters}`}),{onSelect:e=>{this.value=e.name,this.showSuggestions=!1,this.dcChange.emit({value:this.value,el:this.hostElement})}}),this.autocomplete=new n.A(this.autocompleteOptions,this.hostElement,this.inputElement),this.autocomplete.init())}disconnectedCallback(){var e;null===(e=this.autocomplete)||void 0===e||e.destroy()}render(){return this.isValidApiUrl?(0,i.h)("div",{class:this.returnCSSClasses()},(0,i.h)("input",{ref:e=>this.inputElement=e,class:this.placeholder?"placeholder-visible":"",id:"dropdown-input",name:this.name,type:"text",value:this.value,placeholder:this.placeholder,required:this.required,disabled:this.disabled,readonly:this.readonly,autocomplete:"off",onInput:this.handleInput,onChange:this.handleChange}),(0,i.h)("dc-ui-icon",{id:"dropdown-icon",name:"dc_down",size:"tiny"}),!this.hideLabel&&(0,i.h)("label",{htmlFor:"dropdown-input"},this.label,this.required&&(0,i.h)("span",{class:"required-indicator"},"*")),"none"!==this.validationstate&&(0,i.h)(a.S,{state:this.validationstate,message:this.message})):null}static get delegatesFocus(){return!0}static get formAssociated(){return!0}get hostElement(){return(0,i.g)(this)}static get watchers(){return{value:["handleValueChange"],disabled:["handleDisabledChange"],readonly:["handleReadonlyChange"]}}};r.style=':root{--White-Gradient:linear-gradient(\n    180deg,\n    rgba(255, 255, 255, 0) 0%,\n    rgba(255, 255, 255, 0.5) 60%,\n    #ffffff 100%\n  );--Grey-Gradient:linear-gradient(\n    180deg,\n    rgba(237, 241, 244, 0) 0%,\n    rgba(237, 241, 244, 0.5) 60%,\n    #edf1f4 100%\n  );--Blue-Gradient:linear-gradient(\n    180deg,\n    rgba(0, 43, 73, 0) 0%,\n    rgba(0, 43, 73, 0.5) 60%,\n    #002b49 100%\n  )}:host{--state-message-color:#da1e28;--state-outline-color:#009cc2;--suggestions-list-max-entries:5;display:block;font-family:"Bosch Sans"}.dropdown-input-container{position:relative;display:flex;flex-direction:column;position:relative}.dropdown-input-container--validation-state-error{--state-outline-color:#da1e28}.dropdown-input-container--validation-state-error input{outline-color:var(--state-outline-color)}.dropdown-input-container--disabled input{background-color:#cad6dd;border-color:#cad6dd}.dropdown-input-container--disabled input:hover{border-color:#cad6dd}.dropdown-input-container--disabled label{color:#a3bac8}.dropdown-input-container--disabled #dropdown-icon{color:#a3bac8}input{all:unset;-webkit-appearance:none;-moz-appearance:none;appearance:none;font-family:"Bosch Sans";font-size:14px;line-height:16px;letter-spacing:0.16px;color:baseInputColor;outline:2px solid transparent;outline-offset:-2px;border:none;resize:none;background-color:#ffffff;padding:26px 16px 10px 16px;border:1px solid #7995a6;border-radius:0}input:focus{outline-color:var(--state-outline-color)}input:hover{border-color:#1c272e}label{font-family:"Bosch Sans";font-size:14px;line-height:24px;letter-spacing:0.16px;text-transform:uppercase;position:absolute;left:16px;top:15px;transition:all 0.2s ease-in-out;color:#506e81}input:not(:-moz-placeholder-shown)~label{font-family:"Bosch Sans";font-size:12px;line-height:13px;letter-spacing:0.32px;text-transform:uppercase;top:10px}.placeholder-visible~label,input:focus-visible~label,input:not(:placeholder-shown)~label{font-family:"Bosch Sans";font-size:12px;line-height:13px;letter-spacing:0.32px;text-transform:uppercase;top:10px}#dropdown-icon{position:absolute;right:16px;top:19px}.suggestions-list~#dropdown-icon{transform:rotate(180deg)}.suggestions-list{position:absolute;top:56px;left:0;width:100%;background-color:#ffffff;border-radius:0;box-shadow:0px 4px 20px 0px rgba(0, 0, 0, 0.16);z-index:1;margin:0;padding:0;list-style:none;max-height:calc(var(--suggestions-list-max-entries) * 40px);overflow-y:auto}.suggestions-list li{font-family:"Bosch Sans";font-size:14px;line-height:24px;letter-spacing:0.16px;color:#002b49;padding:8px 16px;cursor:pointer}.suggestions-list li:hover{background-color:#edf1f4}.suggestions-list li.active{background-color:#edf1f4}.suggestions-list mark{font-family:"Bosch Sans";font-size:14px;line-height:24px;font-weight:bold;letter-spacing:0.16px;color:#002b49;background-color:transparent}.message{font-family:"Bosch Sans";font-size:12px;line-height:13px;letter-spacing:0.32px;display:flex;align-items:center;gap:8px;margin-top:5px;color:var(--state-message-color)}'},2621:(e,t,s)=>{s.d(t,{S:()=>n});var i=s(937);const n=e=>{let{message:t,state:s}=e;return(0,i.h)("span",{class:"message"},"error"===s&&(0,i.h)("dc-ui-icon",{name:"dc_status_error",color:"red02",size:"tiny"}),t)}}}]);
//# sourceMappingURL=4236.58cda210.chunk.js.map